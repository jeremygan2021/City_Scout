{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\qixiang\\\\src\\\\pages\\\\ItemDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DetailContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);\n  color: #fff;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: url('/assets/grid.svg') repeat;\n    opacity: 0.1;\n    pointer-events: none;\n  }\n`;\n_c = DetailContainer;\nconst PrintableContent = styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  background: rgba(30, 41, 59, 0.8);\n  border-radius: 24px;\n  padding: 2.5rem;\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(94, 234, 212, 0.2);\n  box-shadow: 0 0 40px rgba(94, 234, 212, 0.1);\n  position: relative;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    inset: -2px;\n    border-radius: 25px;\n    padding: 2px;\n    background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n    -webkit-mask: \n      linear-gradient(#fff 0 0) content-box, \n      linear-gradient(#fff 0 0);\n    mask: \n      linear-gradient(#fff 0 0) content-box, \n      linear-gradient(#fff 0 0);\n    -webkit-mask-composite: xor;\n    mask-composite: exclude;\n  }\n`;\n_c2 = PrintableContent;\nconst ItemHeader = styled.div`\n  text-align: center;\n  margin-bottom: 3rem;\n  position: relative;\n\n  h1 {\n    color: #5EEAD4;\n    font-size: 2.8rem;\n    margin-bottom: 1rem;\n    text-shadow: 0 0 20px rgba(94, 234, 212, 0.3);\n    font-weight: 700;\n  }\n  \n  .rarity-badge {\n    background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n    padding: 0.5rem 1.5rem;\n    border-radius: 20px;\n    font-weight: 600;\n    display: inline-block;\n    transform: translateY(-5px);\n    animation: float 3s ease-in-out infinite;\n  }\n`;\n_c3 = ItemHeader;\nconst ItemImage = styled.div`\n  position: relative;\n  margin-bottom: 3rem;\n  \n  img {\n    width: 100%;\n    height: 400px;\n    object-fit: cover;\n    border-radius: 16px;\n    border: 2px solid rgba(94, 234, 212, 0.3);\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    inset: 0;\n    border-radius: 16px;\n    background: linear-gradient(180deg, transparent 0%, rgba(15, 23, 42, 0.2) 100%);\n  }\n`;\n_c4 = ItemImage;\nconst ItemSection = styled.section`\n  margin-bottom: 2.5rem;\n  opacity: 0;\n  transform: translateY(20px);\n  \n  &.visible {\n    animation: fadeIn 0.8s ease-out forwards;\n  }\n  \n  &.map-section {\n    .map-container {\n      position: relative;\n      padding: 20px;\n      background: rgba(15, 23, 42, 0.5);\n      border-radius: 16px;\n      margin-top: 20px;\n      opacity: 0;\n      \n      &.visible {\n        animation: mapReveal 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n      }\n      \n      &::before {\n        content: '';\n        position: absolute;\n        inset: 0;\n        border-radius: 16px;\n        padding: 2px;\n        background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n        -webkit-mask-composite: xor;\n        mask-composite: exclude;\n        animation: glowPulse 2s infinite;\n      }\n    }\n  }\n  \n  &.story-section {\n    p {\n      position: relative;\n      padding-left: 20px;\n      \n      &::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 3px;\n        height: 100%;\n        background: linear-gradient(180deg, #5EEAD4, transparent);\n        transform: scaleY(0);\n        transform-origin: top;\n        transition: transform 0.6s ease;\n      }\n      \n      &.visible::before {\n        transform: scaleY(1);\n      }\n    }\n  }\n`;\n_c5 = ItemSection;\nconst PrintButton = styled.button`\n  position: fixed;\n  bottom: 2rem;\n  right: 2rem;\n  padding: 1rem 2rem;\n  background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n  color: #0F172A;\n  border: none;\n  border-radius: 50px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 600;\n  font-size: 1.1rem;\n  \n  &:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 0 30px rgba(94, 234, 212, 0.4);\n  }\n`;\n\n// 添加全局动画\n_c6 = PrintButton;\nconst GlobalStyle = createGlobalStyle`\n  @keyframes float {\n    0%, 100% { transform: translateY(0); }\n    50% { transform: translateY(-10px); }\n  }\n  \n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  @keyframes glowPulse {\n    0%, 100% { box-shadow: 0 0 20px rgba(94, 234, 212, 0.2); }\n    50% { box-shadow: 0 0 40px rgba(94, 234, 212, 0.4); }\n  }\n  \n  @keyframes mapReveal {\n    0% { transform: scale(0.95); opacity: 0; }\n    50% { transform: scale(1.02); }\n    100% { transform: scale(1); opacity: 1; }\n  }\n  \n  @keyframes slideInRight {\n    from { transform: translateX(50px); opacity: 0; }\n    to { transform: translateX(0); opacity: 1; }\n  }\n`;\n\n// 添加新的组件用于地图标记动画\n_c7 = GlobalStyle;\nconst LocationMarker = styled.div`\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background: #5EEAD4;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n  transition: all 0.3s ease;\n  opacity: ${props => props.isScratched ? 1 : 0};\n  \n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: inherit;\n    border-radius: inherit;\n    animation: ripple 2s infinite;\n  }\n  \n  @keyframes ripple {\n    0% { transform: scale(1); opacity: 1; }\n    100% { transform: scale(3); opacity: 0; }\n  }\n`;\n\n// 添加新的样式组件\n_c8 = LocationMarker;\nconst ScratchCardContainer = styled.div`\n  position: relative;\n  width: 100%;\n  margin: 20px 0;\n  border-radius: 16px;\n  overflow: hidden;\n`;\n_c9 = ScratchCardContainer;\nconst ScratchContent = styled.div`\n  padding: 30px;\n  background: rgba(15, 23, 42, 0.8);\n  border-radius: 16px;\n  color: #5EEAD4;\n  font-size: 1.3rem;\n  text-align: center;\n  letter-spacing: 1px;\n  line-height: 1.6;\n  font-weight: 500;\n  \n  p {\n    margin: 0;\n    text-shadow: 0 0 15px rgba(94, 234, 212, 0.5);\n  }\n`;\n_c10 = ScratchContent;\nconst ScratchCanvas = styled.canvas`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n`;\n_c11 = ScratchCanvas;\nconst ScratchHint = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #5EEAD4;\n  font-size: 1.5rem;\n  font-weight: bold;\n  pointer-events: none;\n  text-shadow: \n    0 0 10px rgba(94, 234, 212, 0.5),\n    0 0 20px rgba(94, 234, 212, 0.3),\n    0 0 30px rgba(94, 234, 212, 0.2);\n  opacity: ${props => props.isScratched ? 0 : 1};\n  transition: opacity 0.3s ease;\n  animation: pulse 2s infinite;\n\n  @keyframes pulse {\n    0% { transform: translate(-50%, -50%) scale(1); }\n    50% { transform: translate(-50%, -50%) scale(1.1); }\n    100% { transform: translate(-50%, -50%) scale(1); }\n  }\n`;\n_c12 = ScratchHint;\nfunction ItemDetail() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [item, setItem] = useState(null);\n  const canvasRef = useRef(null);\n  const [isScratched, setIsScratched] = useState(false);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [mousePos, setMousePos] = useState({\n    x: 50,\n    y: 50\n  });\n  useEffect(() => {\n    // 这里应该是从API获取数据\n    // 暂时使用模拟数据\n    const mockItem = {\n      id: parseInt(id),\n      title: '神秘的青铜门把手',\n      description: '这是一个雕刻着龙纹的古老门把手，据说曾经属于一位著名的收藏家...',\n      image: 'https://images.unsplash.com/photo-1461360228754-6e81c478b882',\n      location: '知识花园区域',\n      rarity: 'SSR',\n      clue: '在书架与书架之间，寻找一扇被遗忘的门',\n      story: '传说这个门把手曾经是通往一个秘密藏书室的钥匙，只有在月圆之夜才会显现其真正的模样。',\n      discoveredBy: '探索者小明',\n      discoveryDate: '2024-01-15',\n      additionalInfo: '这个门把手上的龙纹在特定角度下会泛出青色的光芒...',\n      discoveryStory: '那是一个月圆之夜，我在理古籍时意外发现了这个门把手...'\n    };\n    setItem(mockItem);\n  }, [id]);\n  const handlePrint = () => {\n    window.print();\n  };\n\n  // 修改：将观察者逻辑移动到这个 useEffect 中，并添加 item 依赖\n  useEffect(() => {\n    if (!item) return;\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('visible');\n        }\n      });\n    }, {\n      threshold: 0.2\n    });\n\n    // 同时观察 ItemSection 和 map-container\n    document.querySelectorAll('.item-section, .map-container').forEach(element => {\n      observer.observe(element);\n    });\n    return () => observer.disconnect();\n  }, [item]); // 添加 item 作为依赖\n\n  // 初始化刮刮卡\n  const initScratchCard = useCallback(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // 设置画布尺寸\n    const updateCanvasSize = () => {\n      const container = canvas.parentElement;\n      canvas.width = container.offsetWidth;\n      canvas.height = container.offsetHeight;\n\n      // 填充初始遮罩\n      ctx.fillStyle = '#1E293B';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      // 添加一些花纹使其看起来更有趣\n      ctx.strokeStyle = '#2DD4BF';\n      for (let i = 0; i < canvas.width; i += 20) {\n        for (let j = 0; j < canvas.height; j += 20) {\n          ctx.beginPath();\n          ctx.arc(i, j, 1, 0, Math.PI * 2);\n          ctx.stroke();\n        }\n      }\n    };\n    updateCanvasSize();\n    window.addEventListener('resize', updateCanvasSize);\n    return () => window.removeEventListener('resize', updateCanvasSize);\n  }, []);\n\n  // 处理刮擦效果\n  const handleScratch = useCallback(e => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n\n    // 获取鼠标/触摸位置\n    const x = (e.clientX || e.touches[0].clientX) - rect.left;\n    const y = (e.clientY || e.touches[0].clientY) - rect.top;\n    ctx.globalCompositeOperation = 'destination-out';\n    ctx.beginPath();\n    ctx.arc(x, y, 20, 0, Math.PI * 2);\n    ctx.fill();\n\n    // 检查已刮开的面积\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const pixels = imageData.data;\n    let transparentPixels = 0;\n    for (let i = 0; i < pixels.length; i += 4) {\n      if (pixels[i + 3] === 0) transparentPixels++;\n    }\n    const totalPixels = pixels.length / 4;\n    if (transparentPixels / totalPixels > 0.5) {\n      setIsScratched(true);\n      canvas.style.display = 'none';\n    }\n  }, [isDrawing]);\n  useEffect(() => {\n    if (item) {\n      const cleanup = initScratchCard();\n      return cleanup;\n    }\n  }, [item, initScratchCard]);\n\n  // 添加鼠标移动处理\n  const handleMouseMove = useCallback(e => {\n    if (!isScratched) return;\n    const container = e.currentTarget;\n    const rect = container.getBoundingClientRect();\n    const x = (e.clientX - rect.left) / rect.width * 100;\n    const y = (e.clientY - rect.top) / rect.height * 100;\n    setMousePos({\n      x,\n      y\n    });\n  }, [isScratched]);\n  if (!item) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(DetailContainer, {\n    children: [/*#__PURE__*/_jsxDEV(GlobalStyle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PrintableContent, {\n      children: [/*#__PURE__*/_jsxDEV(ItemHeader, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"rarity-badge\",\n          children: item.rarity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemImage, {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          alt: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemSection, {\n        className: \"item-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDCDC \\u7269\\u54C1\\u63CF\\u8FF0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemSection, {\n        className: \"item-section map-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDDFA\\uFE0F \\u5BFB\\u5B9D\\u7EBF\\u7D22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ScratchCardContainer, {\n          onMouseMove: handleMouseMove,\n          children: [/*#__PURE__*/_jsxDEV(ScratchContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.clue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(LocationMarker, {\n              isScratched: isScratched,\n              style: {\n                left: `${mousePos.x}%`,\n                top: `${mousePos.y}%`,\n                display: isScratched ? 'block' : 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ScratchCanvas, {\n            ref: canvasRef,\n            onMouseDown: () => setIsDrawing(true),\n            onMouseUp: () => setIsDrawing(false),\n            onMouseMove: handleScratch,\n            onMouseLeave: () => setIsDrawing(false),\n            onTouchStart: () => setIsDrawing(true),\n            onTouchEnd: () => setIsDrawing(false),\n            onTouchMove: handleScratch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ScratchHint, {\n            isScratched: isScratched,\n            children: \"\\u2728 \\u522E\\u5F00\\u67E5\\u770B\\u7EBF\\u7D22 \\u2728\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemSection, {\n        className: \"item-section story-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDCD6 \\u80CC\\u540E\\u7684\\u6545\\u4E8B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.story\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemSection, {\n        className: \"item-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDD0D \\u53D1\\u73B0\\u8FC7\\u7A0B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.discoveryStory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemSection, {\n        className: \"item-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u2139\\uFE0F \\u989D\\u5916\\u4FE1\\u606F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.additionalInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ItemSection, {\n        className: \"item-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDCCD \\u57FA\\u672C\\u4FE1\\u606F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u4F4D\\u7F6E: \", item.location]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u53D1\\u73B0\\u8005: \", item.discoveredBy]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u53D1\\u73B0\\u65F6\\u95F4: \", item.discoveryDate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PrintButton, {\n      onClick: handlePrint,\n      children: \"\\uD83D\\uDDA8\\uFE0F \\u6253\\u5370\\u9875\\u9762\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 441,\n    columnNumber: 5\n  }, this);\n}\n_s(ItemDetail, \"ipQlVmHYqPZyGpyhmo34ep0wpng=\", false, function () {\n  return [useParams];\n});\n_c13 = ItemDetail;\nexport default ItemDetail;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"DetailContainer\");\n$RefreshReg$(_c2, \"PrintableContent\");\n$RefreshReg$(_c3, \"ItemHeader\");\n$RefreshReg$(_c4, \"ItemImage\");\n$RefreshReg$(_c5, \"ItemSection\");\n$RefreshReg$(_c6, \"PrintButton\");\n$RefreshReg$(_c7, \"GlobalStyle\");\n$RefreshReg$(_c8, \"LocationMarker\");\n$RefreshReg$(_c9, \"ScratchCardContainer\");\n$RefreshReg$(_c10, \"ScratchContent\");\n$RefreshReg$(_c11, \"ScratchCanvas\");\n$RefreshReg$(_c12, \"ScratchHint\");\n$RefreshReg$(_c13, \"ItemDetail\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useCallback","useParams","styled","createGlobalStyle","jsxDEV","_jsxDEV","DetailContainer","div","_c","PrintableContent","_c2","ItemHeader","_c3","ItemImage","_c4","ItemSection","section","_c5","PrintButton","button","_c6","GlobalStyle","_c7","LocationMarker","props","isScratched","_c8","ScratchCardContainer","_c9","ScratchContent","_c10","ScratchCanvas","canvas","_c11","ScratchHint","_c12","ItemDetail","_s","id","item","setItem","canvasRef","setIsScratched","isDrawing","setIsDrawing","mousePos","setMousePos","x","y","mockItem","parseInt","title","description","image","location","rarity","clue","story","discoveredBy","discoveryDate","additionalInfo","discoveryStory","handlePrint","window","print","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","classList","add","threshold","document","querySelectorAll","element","observe","disconnect","initScratchCard","current","ctx","getContext","updateCanvasSize","container","parentElement","width","offsetWidth","height","offsetHeight","fillStyle","fillRect","strokeStyle","i","j","beginPath","arc","Math","PI","stroke","addEventListener","removeEventListener","handleScratch","e","rect","getBoundingClientRect","clientX","touches","left","clientY","top","globalCompositeOperation","fill","imageData","getImageData","pixels","data","transparentPixels","length","totalPixels","style","display","cleanup","handleMouseMove","currentTarget","children","fileName","_jsxFileName","lineNumber","columnNumber","className","src","alt","onMouseMove","ref","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","onTouchMove","onClick","_c13","$RefreshReg$"],"sources":["D:/dev/qixiang/src/pages/ItemDetail.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\nimport styled, { createGlobalStyle } from 'styled-components';\n\nconst DetailContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);\n  color: #fff;\n  padding: 2rem;\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: url('/assets/grid.svg') repeat;\n    opacity: 0.1;\n    pointer-events: none;\n  }\n`;\n\nconst PrintableContent = styled.div`\n  max-width: 800px;\n  margin: 0 auto;\n  background: rgba(30, 41, 59, 0.8);\n  border-radius: 24px;\n  padding: 2.5rem;\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(94, 234, 212, 0.2);\n  box-shadow: 0 0 40px rgba(94, 234, 212, 0.1);\n  position: relative;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    inset: -2px;\n    border-radius: 25px;\n    padding: 2px;\n    background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n    -webkit-mask: \n      linear-gradient(#fff 0 0) content-box, \n      linear-gradient(#fff 0 0);\n    mask: \n      linear-gradient(#fff 0 0) content-box, \n      linear-gradient(#fff 0 0);\n    -webkit-mask-composite: xor;\n    mask-composite: exclude;\n  }\n`;\n\nconst ItemHeader = styled.div`\n  text-align: center;\n  margin-bottom: 3rem;\n  position: relative;\n\n  h1 {\n    color: #5EEAD4;\n    font-size: 2.8rem;\n    margin-bottom: 1rem;\n    text-shadow: 0 0 20px rgba(94, 234, 212, 0.3);\n    font-weight: 700;\n  }\n  \n  .rarity-badge {\n    background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n    padding: 0.5rem 1.5rem;\n    border-radius: 20px;\n    font-weight: 600;\n    display: inline-block;\n    transform: translateY(-5px);\n    animation: float 3s ease-in-out infinite;\n  }\n`;\n\nconst ItemImage = styled.div`\n  position: relative;\n  margin-bottom: 3rem;\n  \n  img {\n    width: 100%;\n    height: 400px;\n    object-fit: cover;\n    border-radius: 16px;\n    border: 2px solid rgba(94, 234, 212, 0.3);\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    inset: 0;\n    border-radius: 16px;\n    background: linear-gradient(180deg, transparent 0%, rgba(15, 23, 42, 0.2) 100%);\n  }\n`;\n\nconst ItemSection = styled.section`\n  margin-bottom: 2.5rem;\n  opacity: 0;\n  transform: translateY(20px);\n  \n  &.visible {\n    animation: fadeIn 0.8s ease-out forwards;\n  }\n  \n  &.map-section {\n    .map-container {\n      position: relative;\n      padding: 20px;\n      background: rgba(15, 23, 42, 0.5);\n      border-radius: 16px;\n      margin-top: 20px;\n      opacity: 0;\n      \n      &.visible {\n        animation: mapReveal 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n      }\n      \n      &::before {\n        content: '';\n        position: absolute;\n        inset: 0;\n        border-radius: 16px;\n        padding: 2px;\n        background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n        -webkit-mask-composite: xor;\n        mask-composite: exclude;\n        animation: glowPulse 2s infinite;\n      }\n    }\n  }\n  \n  &.story-section {\n    p {\n      position: relative;\n      padding-left: 20px;\n      \n      &::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 3px;\n        height: 100%;\n        background: linear-gradient(180deg, #5EEAD4, transparent);\n        transform: scaleY(0);\n        transform-origin: top;\n        transition: transform 0.6s ease;\n      }\n      \n      &.visible::before {\n        transform: scaleY(1);\n      }\n    }\n  }\n`;\n\nconst PrintButton = styled.button`\n  position: fixed;\n  bottom: 2rem;\n  right: 2rem;\n  padding: 1rem 2rem;\n  background: linear-gradient(45deg, #5EEAD4, #2DD4BF);\n  color: #0F172A;\n  border: none;\n  border-radius: 50px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 600;\n  font-size: 1.1rem;\n  \n  &:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 0 30px rgba(94, 234, 212, 0.4);\n  }\n`;\n\n// 添加全局动画\nconst GlobalStyle = createGlobalStyle`\n  @keyframes float {\n    0%, 100% { transform: translateY(0); }\n    50% { transform: translateY(-10px); }\n  }\n  \n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  \n  @keyframes glowPulse {\n    0%, 100% { box-shadow: 0 0 20px rgba(94, 234, 212, 0.2); }\n    50% { box-shadow: 0 0 40px rgba(94, 234, 212, 0.4); }\n  }\n  \n  @keyframes mapReveal {\n    0% { transform: scale(0.95); opacity: 0; }\n    50% { transform: scale(1.02); }\n    100% { transform: scale(1); opacity: 1; }\n  }\n  \n  @keyframes slideInRight {\n    from { transform: translateX(50px); opacity: 0; }\n    to { transform: translateX(0); opacity: 1; }\n  }\n`;\n\n// 添加新的组件用于地图标记动画\nconst LocationMarker = styled.div`\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background: #5EEAD4;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n  transition: all 0.3s ease;\n  opacity: ${props => props.isScratched ? 1 : 0};\n  \n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: inherit;\n    border-radius: inherit;\n    animation: ripple 2s infinite;\n  }\n  \n  @keyframes ripple {\n    0% { transform: scale(1); opacity: 1; }\n    100% { transform: scale(3); opacity: 0; }\n  }\n`;\n\n// 添加新的样式组件\nconst ScratchCardContainer = styled.div`\n  position: relative;\n  width: 100%;\n  margin: 20px 0;\n  border-radius: 16px;\n  overflow: hidden;\n`;\n\nconst ScratchContent = styled.div`\n  padding: 30px;\n  background: rgba(15, 23, 42, 0.8);\n  border-radius: 16px;\n  color: #5EEAD4;\n  font-size: 1.3rem;\n  text-align: center;\n  letter-spacing: 1px;\n  line-height: 1.6;\n  font-weight: 500;\n  \n  p {\n    margin: 0;\n    text-shadow: 0 0 15px rgba(94, 234, 212, 0.5);\n  }\n`;\n\nconst ScratchCanvas = styled.canvas`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n`;\n\nconst ScratchHint = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #5EEAD4;\n  font-size: 1.5rem;\n  font-weight: bold;\n  pointer-events: none;\n  text-shadow: \n    0 0 10px rgba(94, 234, 212, 0.5),\n    0 0 20px rgba(94, 234, 212, 0.3),\n    0 0 30px rgba(94, 234, 212, 0.2);\n  opacity: ${props => props.isScratched ? 0 : 1};\n  transition: opacity 0.3s ease;\n  animation: pulse 2s infinite;\n\n  @keyframes pulse {\n    0% { transform: translate(-50%, -50%) scale(1); }\n    50% { transform: translate(-50%, -50%) scale(1.1); }\n    100% { transform: translate(-50%, -50%) scale(1); }\n  }\n`;\n\nfunction ItemDetail() {\n  const { id } = useParams();\n  const [item, setItem] = useState(null);\n  const canvasRef = useRef(null);\n  const [isScratched, setIsScratched] = useState(false);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [mousePos, setMousePos] = useState({ x: 50, y: 50 });\n\n  useEffect(() => {\n    // 这里应该是从API获取数据\n    // 暂时使用模拟数据\n    const mockItem = {\n      id: parseInt(id),\n      title: '神秘的青铜门把手',\n      description: '这是一个雕刻着龙纹的古老门把手，据说曾经属于一位著名的收藏家...',\n      image: 'https://images.unsplash.com/photo-1461360228754-6e81c478b882',\n      location: '知识花园区域',\n      rarity: 'SSR',\n      clue: '在书架与书架之间，寻找一扇被遗忘的门',\n      story: '传说这个门把手曾经是通往一个秘密藏书室的钥匙，只有在月圆之夜才会显现其真正的模样。',\n      discoveredBy: '探索者小明',\n      discoveryDate: '2024-01-15',\n      additionalInfo: '这个门把手上的龙纹在特定角度下会泛出青色的光芒...',\n      discoveryStory: '那是一个月圆之夜，我在理古籍时意外发现了这个门把手...'\n    };\n\n    setItem(mockItem);\n  }, [id]);\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  // 修改：将观察者逻辑移动到这个 useEffect 中，并添加 item 依赖\n  useEffect(() => {\n    if (!item) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            entry.target.classList.add('visible');\n          }\n        });\n      },\n      { threshold: 0.2 }\n    );\n\n    // 同时观察 ItemSection 和 map-container\n    document.querySelectorAll('.item-section, .map-container').forEach(element => {\n      observer.observe(element);\n    });\n\n    return () => observer.disconnect();\n  }, [item]); // 添加 item 作为依赖\n\n  // 初始化刮刮卡\n  const initScratchCard = useCallback(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // 设置画布尺寸\n    const updateCanvasSize = () => {\n      const container = canvas.parentElement;\n      canvas.width = container.offsetWidth;\n      canvas.height = container.offsetHeight;\n      \n      // 填充初始遮罩\n      ctx.fillStyle = '#1E293B';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      \n      // 添加一些花纹使其看起来更有趣\n      ctx.strokeStyle = '#2DD4BF';\n      for (let i = 0; i < canvas.width; i += 20) {\n        for (let j = 0; j < canvas.height; j += 20) {\n          ctx.beginPath();\n          ctx.arc(i, j, 1, 0, Math.PI * 2);\n          ctx.stroke();\n        }\n      }\n    };\n\n    updateCanvasSize();\n    window.addEventListener('resize', updateCanvasSize);\n    return () => window.removeEventListener('resize', updateCanvasSize);\n  }, []);\n\n  // 处理刮擦效果\n  const handleScratch = useCallback((e) => {\n    if (!isDrawing) return;\n    \n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    \n    // 获取鼠标/触摸位置\n    const x = (e.clientX || e.touches[0].clientX) - rect.left;\n    const y = (e.clientY || e.touches[0].clientY) - rect.top;\n    \n    ctx.globalCompositeOperation = 'destination-out';\n    ctx.beginPath();\n    ctx.arc(x, y, 20, 0, Math.PI * 2);\n    ctx.fill();\n\n    // 检查已刮开的面积\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const pixels = imageData.data;\n    let transparentPixels = 0;\n    \n    for (let i = 0; i < pixels.length; i += 4) {\n      if (pixels[i + 3] === 0) transparentPixels++;\n    }\n    \n    const totalPixels = pixels.length / 4;\n    if (transparentPixels / totalPixels > 0.5) {\n      setIsScratched(true);\n      canvas.style.display = 'none';\n    }\n  }, [isDrawing]);\n\n  useEffect(() => {\n    if (item) {\n      const cleanup = initScratchCard();\n      return cleanup;\n    }\n  }, [item, initScratchCard]);\n\n  // 添加鼠标移动处理\n  const handleMouseMove = useCallback((e) => {\n    if (!isScratched) return;\n    \n    const container = e.currentTarget;\n    const rect = container.getBoundingClientRect();\n    const x = ((e.clientX - rect.left) / rect.width) * 100;\n    const y = ((e.clientY - rect.top) / rect.height) * 100;\n    \n    setMousePos({ x, y });\n  }, [isScratched]);\n\n  if (!item) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <DetailContainer>\n      <GlobalStyle />\n      <PrintableContent>\n        <ItemHeader>\n          <h1>{item.title}</h1>\n          <p className=\"rarity-badge\">{item.rarity}</p>\n        </ItemHeader>\n\n        <ItemImage>\n          <img src={item.image} alt={item.title} />\n        </ItemImage>\n\n        <ItemSection className=\"item-section\">\n          <h2>📜 物品描述</h2>\n          <p>{item.description}</p>\n        </ItemSection>\n\n        <ItemSection className=\"item-section map-section\">\n          <h2>🗺️ 寻宝线索</h2>\n          <ScratchCardContainer onMouseMove={handleMouseMove}>\n            <ScratchContent>\n              <p>{item.clue}</p>\n              <LocationMarker \n                isScratched={isScratched}\n                style={{ \n                  left: `${mousePos.x}%`, \n                  top: `${mousePos.y}%`,\n                  display: isScratched ? 'block' : 'none'\n                }} \n              />\n            </ScratchContent>\n            <ScratchCanvas\n              ref={canvasRef}\n              onMouseDown={() => setIsDrawing(true)}\n              onMouseUp={() => setIsDrawing(false)}\n              onMouseMove={handleScratch}\n              onMouseLeave={() => setIsDrawing(false)}\n              onTouchStart={() => setIsDrawing(true)}\n              onTouchEnd={() => setIsDrawing(false)}\n              onTouchMove={handleScratch}\n            />\n            <ScratchHint isScratched={isScratched}>\n              ✨ 刮开查看线索 ✨\n            </ScratchHint>\n          </ScratchCardContainer>\n        </ItemSection>\n\n        <ItemSection className=\"item-section story-section\">\n          <h2>📖 背后的故事</h2>\n          <p>{item.story}</p>\n        </ItemSection>\n\n        <ItemSection className=\"item-section\">\n          <h2>🔍 发现过程</h2>\n          <p>{item.discoveryStory}</p>\n        </ItemSection>\n\n        <ItemSection className=\"item-section\">\n          <h2>ℹ️ 额外信息</h2>\n          <p>{item.additionalInfo}</p>\n        </ItemSection>\n\n        <ItemSection className=\"item-section\">\n          <h2>📍 基本信息</h2>\n          <p>位置: {item.location}</p>\n          <p>发现者: {item.discoveredBy}</p>\n          <p>发现时间: {item.discoveryDate}</p>\n        </ItemSection>\n      </PrintableContent>\n\n      <PrintButton onClick={handlePrint}>\n        🖨️ 打印页面\n      </PrintButton>\n    </DetailContainer>\n  );\n}\n\nexport default ItemDetail; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,OAAOC,MAAM,IAAIC,iBAAiB,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9D,MAAMC,eAAe,GAAGJ,MAAM,CAACK,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAjBIF,eAAe;AAmBrB,MAAMG,gBAAgB,GAAGP,MAAM,CAACK,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GA3BID,gBAAgB;AA6BtB,MAAME,UAAU,GAAGT,MAAM,CAACK,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACK,GAAA,GAtBID,UAAU;AAwBhB,MAAME,SAAS,GAAGX,MAAM,CAACK,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACO,GAAA,GAnBID,SAAS;AAqBf,MAAME,WAAW,GAAGb,MAAM,CAACc,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GA7DIF,WAAW;AA+DjB,MAAMG,WAAW,GAAGhB,MAAM,CAACiB,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AAAAC,GAAA,GApBMF,WAAW;AAqBjB,MAAMG,WAAW,GAAGlB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AAAAmB,GAAA,GA5BMD,WAAW;AA6BjB,MAAME,cAAc,GAAGrB,MAAM,CAACK,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAaiB,KAAK,IAAIA,KAAK,CAACC,WAAW,GAAG,CAAC,GAAG,CAAC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AAAAC,GAAA,GA3BMH,cAAc;AA4BpB,MAAMI,oBAAoB,GAAGzB,MAAM,CAACK,GAAG;AACvC;AACA;AACA;AACA;AACA;AACA,CAAC;AAACqB,GAAA,GANID,oBAAoB;AAQ1B,MAAME,cAAc,GAAG3B,MAAM,CAACK,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACuB,IAAA,GAfID,cAAc;AAiBpB,MAAME,aAAa,GAAG7B,MAAM,CAAC8B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAPIF,aAAa;AASnB,MAAMG,WAAW,GAAGhC,MAAM,CAACK,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAaiB,KAAK,IAAIA,KAAK,CAACC,WAAW,GAAG,CAAC,GAAG,CAAC;AAC/C;AACA;AACA;AAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}